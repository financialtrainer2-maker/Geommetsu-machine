<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ì ë©”ì¶” - ë‹¤ì–‘í•œ ë©”ë‰´ ë¡¤ë ›</title>
<style>
body { font-family: Arial, sans-serif; margin:0; padding:0; min-height:100vh; background: linear-gradient(135deg, #ffecd2, #fcb69f); display:flex; flex-direction: column; align-items:center; }
.filter-card, .main-card { background:#fff; border-radius:15px; padding:20px; width:90%; max-width:450px; margin:20px 0; box-shadow:0 10px 25px rgba(0,0,0,0.2); }
.filter-card h3, .main-card h1 { margin-bottom:10px; text-align:center; }
.filter-card label { display:flex; align-items:center; gap:8px; font-size:16px; cursor:pointer; margin-bottom:5px; }
.filter-card input[type=radio] { width:20px; height:20px; }
button { padding:12px; font-size:18px; border-radius:10px; border:none; cursor:pointer; width:100%; margin-top:10px; }
.recommend-btn { background-color:#ff7f50; color:white; }
.share-result-btn { background-color:#4CAF50; color:white; }
.share-web-btn { background-color:#2196F3; color:white; }
.sns-buttons { display:flex; gap:10px; margin-top:10px; justify-content:center; flex-wrap:wrap; }
.result { margin-top:20px; font-size:16px; text-align:left; width:100%; max-height:350px; overflow-y:auto; padding-right:5px; }
.advantages, .disadvantages { margin-top:10px; padding:10px; background:#f9f9f9; border-radius:10px; }
.advantages strong, .disadvantages strong { color:#ff7f50; }
.roulette { font-size:22px; font-weight:bold; margin-top:20px; min-height:28px; transition: all 0.2s; text-align:center; }
.roulette.spin { animation: spinFlash 0.2s; }
.roulette.final { color:#fff; background:#ff7f50; border-radius:10px; padding:5px; }
@keyframes spinFlash {
  0% { color:#000; background:transparent; }
  50% { color:#ff7f50; background:#fff3e0; transform: scale(1.2); }
  100% { color:#000; background:transparent; transform: scale(1); }
}
.adsense { background-color:#f1f1f1; width:90%; max-width:450px; height:90px; margin:20px 0; display:flex; justify-content:center; align-items:center; color:#888; border-radius:10px; box-shadow:0 5px 15px rgba(0,0,0,0.2);}
</style>
</head>
<body>

<div class="adsense">ê´‘ê³  ìë¦¬ (AdSense ì‚½ì…)</div>

<div class="filter-card">
  <h3>ì¹´í…Œê³ ë¦¬/ë§› í•„í„° (í•œ ë²ˆì— í•˜ë‚˜ ì„ íƒ)</h3>
  <label><input type="radio" name="filter" value="í•œì‹"> í•œì‹</label>
  <label><input type="radio" name="filter" value="ì–‘ì‹"> ì–‘ì‹</label>
  <label><input type="radio" name="filter" value="ì¤‘ì‹"> ì¤‘ì‹</label>
  <label><input type="radio" name="filter" value="ì¼ì‹"> ì¼ì‹</label>
  <label><input type="radio" name="filter" value="ê°„ë‹¨"> ê°„ë‹¨</label>
  <label><input type="radio" name="filter" value="ê±´ê°•ì‹"> ê±´ê°•ì‹</label>
  <label><input type="radio" name="filter" value="ë§¤ìš´ë§›"> ë§¤ìš´ ë§›</label>
  <label><input type="radio" name="filter" value="ì‹œì›í•œë§›"> ì‹œì›í•œ ë§›</label>
  <label><input type="radio" name="filter" value="ìˆœí•œë§›"> ìˆœí•œ ë§›</label>
</div>

<div class="main-card">
  <h1>ì ë©”ì¶” ğŸ½</h1>
  <button class="recommend-btn" onclick="startRoulette()">ì¶”ì²œ!</button>
  <div class="roulette" id="roulette">ğŸ½</div>
  <div class="result" id="result"></div>
  <button class="share-result-btn" id="shareResultBtn" style="display:none;" onclick="shareResult(true)">ê²°ê³¼ ê³µìœ </button>
  <button class="share-web-btn" onclick="shareResult(false)">ì›¹ ê³µìœ </button>

  <div class="sns-buttons" id="snsButtons" style="display:none;">
    
  </div>
</div>

<script>
// ë©”ë‰´ ë°ì´í„° (20ê°œ ì´ìƒ)
const menus = [
  {name:"ê¹€ì¹˜ì°Œê°œ ğŸ²", health:"ë©´ì—­ë ¥ ê°•í™”", ingredients:["ê¹€ì¹˜","ë¼ì§€ê³ ê¸°","ë‘ë¶€"], advantages:"ë”°ëœ»í•¨, ì†Œí™” ë„ì›€", disadvantages:"ì¹¼ë¡œë¦¬ ë†’ìŒ", tags:["í•œì‹","ë§¤ìš´ë§›"]},
  {name:"ë¹„ë¹”ë°¥ ğŸ¥—", health:"ì˜ì–‘ ê· í˜•", ingredients:["ë°¥","ë‚˜ë¬¼","ê³„ë€"], advantages:"ë¹„íƒ€ë¯¼ í’ë¶€", disadvantages:"ì¡°ë¦¬ì‹œê°„ ìˆìŒ", tags:["í•œì‹","ê±´ê°•ì‹","ìˆœí•œë§›"]},
  {name:"í”¼ì ğŸ•", health:"ì¹¼ìŠ˜ ê³µê¸‰", ingredients:["ë„ìš°","ì¹˜ì¦ˆ","í† ë§ˆí†  ì†ŒìŠ¤"], advantages:"ë§›ìˆìŒ", disadvantages:"ì¹¼ë¡œë¦¬ ë†’ìŒ", tags:["ì–‘ì‹","ê°„ë‹¨"]},
  {name:"ë¼ë©´ ğŸœ", health:"ë¹ ë¥¸ ì—ë„ˆì§€", ingredients:["ë¼ë©´","ê³„ë€","ê¹€ì¹˜"], advantages:"ë¹ ë¥¸ ì¡°ë¦¬", disadvantages:"ë‚˜íŠ¸ë¥¨ ë†’ìŒ", tags:["ê°„ë‹¨","ë§¤ìš´ë§›"]},
  {name:"ìƒëŸ¬ë“œ ğŸ¥—", health:"ë¹„íƒ€ë¯¼ í’ë¶€", ingredients:["ì±„ì†Œ","ë“œë ˆì‹±"], advantages:"ë‹¤ì´ì–´íŠ¸ ë„ì›€", disadvantages:"í¬ë§Œê° ì ìŒ", tags:["ê±´ê°•ì‹","ê°„ë‹¨","ìˆœí•œë§›"]},
  {name:"ë–¡ë³¶ì´ ğŸŒ¶", health:"ì¹¼ë¡œë¦¬ ê³µê¸‰", ingredients:["ë–¡","ê³ ì¶”ì¥"], advantages:"ê¸°ë¶„ ì „í™˜", disadvantages:"ë§¤ìš´ë§› ê°•í•¨", tags:["í•œì‹","ë§¤ìš´ë§›","ê°„ë‹¨"]},
  {name:"ì´ˆë°¥ ğŸ£", health:"ë‹¨ë°±ì§ˆ ê³µê¸‰", ingredients:["ë°¥","ìƒì„ "], advantages:"ì˜¤ë©”ê°€3 í’ë¶€", disadvantages:"ì¡°ë¦¬ ì–´ë ¤ì›€", tags:["ì¼ì‹","ìˆœí•œë§›"]},
  {name:"íŒŒìŠ¤íƒ€ ğŸ", health:"íƒ„ìˆ˜í™”ë¬¼ ê³µê¸‰", ingredients:["íŒŒìŠ¤íƒ€","ì†ŒìŠ¤"], advantages:"ê°„í¸", disadvantages:"ì¹¼ë¡œë¦¬ ë†’ìŒ", tags:["ì–‘ì‹","ê°„ë‹¨"]},
  {name:"ìŠ¤í…Œì´í¬ ğŸ¥©", health:"ë‹¨ë°±ì§ˆ, ì² ë¶„", ingredients:["ì†Œê³ ê¸°","ì†Œê¸ˆ"], advantages:"ì˜ì–‘ í’ë¶€", disadvantages:"ì¡°ë¦¬ ë‚œì´ë„ ìˆìŒ", tags:["ì–‘ì‹","ê±´ê°•ì‹"]},
  {name:"ìƒŒë“œìœ„ì¹˜ ğŸ¥ª", health:"ê°„ë‹¨í•œ ì‹ì‚¬", ingredients:["ë¹µ","í–„","ì¹˜ì¦ˆ"], advantages:"ë¹ ë¥¸ ì¡°ë¦¬", disadvantages:"ì˜ì–‘ ë¶ˆê· í˜•", tags:["ì–‘ì‹","ê°„ë‹¨"]},
  {name:"ìš°ë™ ğŸœ", health:"ì†Œí™” ë„ì›€", ingredients:["ë©´","êµ­ë¬¼"], advantages:"ë”°ëœ»í•¨", disadvantages:"ì¹¼ë¡œë¦¬ ìˆìŒ", tags:["ì¼ì‹","ìˆœí•œë§›"]},
  {name:"ì§œì¥ë©´ ğŸœ", health:"íƒ„ìˆ˜í™”ë¬¼ ê³µê¸‰", ingredients:["ë©´","ì§œì¥ ì†ŒìŠ¤"], advantages:"ë§›ìˆìŒ", disadvantages:"ì¹¼ë¡œë¦¬ ë†’ìŒ", tags:["ì¤‘ì‹","ìˆœí•œë§›"]},
  {name:"íƒ•ìˆ˜ìœ¡ ğŸ¥©", health:"ë‹¨ë°±ì§ˆ ê³µê¸‰", ingredients:["ë¼ì§€ê³ ê¸°","ì†ŒìŠ¤"], advantages:"ë§›ìˆìŒ", disadvantages:"ì¹¼ë¡œë¦¬ ë†’ìŒ", tags:["ì¤‘ì‹","ê°„ë‹¨"]},
  {name:"ê¹€ë°¥ ğŸ™", health:"ê°„í¸ ì‹ì‚¬", ingredients:["ë°¥","ì¬ë£Œ"], advantages:"íœ´ëŒ€ ê°„í¸", disadvantages:"ì¹¼ë¡œë¦¬ ìˆìŒ", tags:["í•œì‹","ê°„ë‹¨"]},
  {name:"ì˜¤ë¯€ë¼ì´ìŠ¤ ğŸ³", health:"ë‹¨ë°±ì§ˆ ê³µê¸‰", ingredients:["ë°¥","ê³„ë€"], advantages:"ë§›ìˆìŒ", disadvantages:"ì¡°ë¦¬ ì‹œê°„", tags:["ì–‘ì‹","ìˆœí•œë§›"]},
  {name:"ì¹´ë ˆ ğŸ›", health:"íƒ„ìˆ˜í™”ë¬¼ ê³µê¸‰", ingredients:["ë°¥","ì¹´ë ˆ ì†ŒìŠ¤"], advantages:"ê°„í¸", disadvantages:"ì¹¼ë¡œë¦¬ ìˆìŒ", tags:["ì–‘ì‹","ìˆœí•œë§›"]},
  {name:"ëƒ‰ë©´ ğŸ¥¢", health:"ì‹œì›í•¨", ingredients:["ë©´","ìœ¡ìˆ˜"], advantages:"ì—¬ë¦„ì— ì¢‹ìŒ", disadvantages:"í¬ë§Œê° ì ìŒ", tags:["í•œì‹","ì‹œì›í•œë§›"]},
  {name:"ê°ˆë¹„íƒ• ğŸ²", health:"ë‹¨ë°±ì§ˆ ê³µê¸‰", ingredients:["ê°ˆë¹„","ìœ¡ìˆ˜"], advantages:"ì˜ì–‘ í’ë¶€", disadvantages:"ì¡°ë¦¬ ì‹œê°„", tags:["í•œì‹","ìˆœí•œë§›"]},
  {name:"ë¶€ëŒ€ì°Œê°œ ğŸ²", health:"ì¹¼ë¡œë¦¬ ê³µê¸‰", ingredients:["í–„","ì†Œì‹œì§€","ê¹€ì¹˜"], advantages:"í¬ë§Œê°", disadvantages:"ë‚˜íŠ¸ë¥¨ ë†’ìŒ", tags:["í•œì‹","ë§¤ìš´ë§›"]},
  {name:"ë–¡êµ­ ğŸ²", health:"íƒ„ìˆ˜í™”ë¬¼ ê³µê¸‰", ingredients:["ë–¡","ìœ¡ìˆ˜"], advantages:"ìƒˆí•´ì— ì¢‹ìŒ", disadvantages:"ì¡°ë¦¬ ì‹œê°„", tags:["í•œì‹","ìˆœí•œë§›"]}
];

let finalMenu = null;
function startRoulette() {
  const selectedFilter = document.querySelector('.filter-card input[name="filter"]:checked')?.value;

  // ë¡¤ë ›ì— ëŒì•„ê°ˆ ë°°ì—´: ëª¨ë“  ë©”ë‰´ í¬í•¨ (íšŒì „ìš©)
  const rouletteArray = [];
  while(rouletteArray.length < 20){ // ì¶©ë¶„íˆ ëŒì•„ê°€ê²Œ
    rouletteArray.push(...menus);
  }

  const rouletteDiv = document.getElementById("roulette");
  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = "";
  rouletteDiv.classList.remove('final');
  document.getElementById("shareResultBtn").style.display="none";
  document.getElementById("snsButtons").style.display="none";

  let i = 0;
  const spins = 30;
  let delay = 70;

  function spin() {
    const menu = rouletteArray[i % rouletteArray.length];
    rouletteDiv.textContent = menu.name;

    rouletteDiv.classList.remove('spin');
    void rouletteDiv.offsetWidth;
    rouletteDiv.classList.add('spin');

    i++;
    delay *= 1.05;
    if(i <= spins){
      setTimeout(spin, delay);
    } else {
      // ìµœì¢… ê²°ê³¼: ì„ íƒëœ í•„í„°ì— ë§ëŠ” ë©”ë‰´ ì¤‘ ëœë¤
      let finalArray = menus;
      if(selectedFilter){
        finalArray = menus.filter(menu => menu.tags.includes(selectedFilter));
      }
      finalMenu = finalArray[Math.floor(Math.random() * finalArray.length)];

      rouletteDiv.textContent = finalMenu.name;
      rouletteDiv.classList.add('final');
      showResult(finalMenu);
    }
  }

  spin();
}





function showResult(menu){
  const resultDiv = document.getElementById("result");
  resultDiv.innerHTML = `
    <p><strong>ê±´ê°• íš¨ê³¼:</strong> ${menu.health}</p>
    <p><strong>ì¬ë£Œ:</strong> ${menu.ingredients.join(", ")}</p>
    <div class="advantages"><strong>ì¥ì :</strong> ${menu.advantages}</div>
    <div class="disadvantages"><strong>ë‹¨ì :</strong> ${menu.disadvantages}</div>
  `;
  document.getElementById("shareResultBtn").style.display="inline-block";
  document.getElementById("snsButtons").style.display="flex";

  const baseUrl = window.location.origin + window.location.pathname + "?menu=" + encodeURIComponent(menu.name);
  document.getElementById("kakaoBtn").href = `https://sharer.kakao.com/talk/friends/picker/link?url=${encodeURIComponent(baseUrl)}&text=${encodeURIComponent("ì˜¤ëŠ˜ ì ì‹¬ ì¶”ì²œ: "+menu.name)}`;
  document.getElementById("facebookBtn").href = `https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(baseUrl)}`;
  document.getElementById("twitterBtn").href = `https://twitter.com/intent/tweet?text=${encodeURIComponent("ì˜¤ëŠ˜ ì ì‹¬ ì¶”ì²œ: "+menu.name)}&url=${encodeURIComponent(baseUrl)}`;

  const url = new URL(window.location);
  url.searchParams.set('menu', menu.name);
  window.history.replaceState(null,'',url);
}

function shareResult(isResult){
  const baseUrl = window.location.origin + window.location.pathname;
  let url = baseUrl;
  let text = "ì ë©”ì¶”ë¡œ ì˜¤ëŠ˜ ì ì‹¬ ë©”ë‰´ ì¶”ì²œë°›ê¸°!";
  if(isResult && finalMenu){
    url += "?menu=" + encodeURIComponent(finalMenu.name);
    text = `ì˜¤ëŠ˜ ì ì‹¬ ì¶”ì²œ: ${finalMenu.name}\nì¥ì : ${finalMenu.advantages}\në‹¨ì : ${finalMenu.disadvantages}`;
  }

  if(navigator.share){
    navigator.share({title:"ì ë©”ì¶”", text, url}).catch(console.error);
  } else {
    window.open(url,"_blank");
  }
}
</script>
</body>
</html>
